# –ú–æ–π –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¶–µ–ª–µ–π ‚Äî –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

–ö–æ—Ä–æ—Ç–∫–æ: —è –¥–æ–±–∞–≤–∏–ª –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ñ–∞–π–ª `state.json`) –∏ –ø—Ä–æ—Å—Ç—É—é –∑–∞–≥–æ—Ç–æ–≤–∫—É –¥–ª—è –æ–±–ª–∞—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Supabase.

## –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚úÖ
- –§–∞–π–ª —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤:
  - Windows: `%APPDATA%\.my_tasks_planner\state.json`
  - Unix/macOS: `~/.my_tasks_planner/state.json`
- –ü—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `save_state()` (—Ñ–∞–π–ª –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ).
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å.

## –û–±–ª–∞—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚ö†Ô∏è
–Ø –¥–æ–±–∞–≤–∏–ª `SyncClient` ‚Äî —ç—Ç–æ –ª–µ–≥–∫–∞—è –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è Supabase. –ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —à–∞–≥–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ https://supabase.com
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `user_states` (–ø—Ä–∏–º–µ—Ä SQL):

```sql
create table user_states (
  user_id text primary key,
  state jsonb,
  updated_at timestamptz default now()
);
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (RLS) —Ç–∞–∫, —á—Ç–æ–±—ã –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–≥ —á–∏—Ç–∞—Ç—å/–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–æ–∏ —Å—Ç—Ä–æ–∫–∏, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —Ç–µ—Å—Ç–æ–≤.
4. –í –∫–∞—Ç–∞–ª–æ–≥–µ –¥–∞–Ω–Ω—ã—Ö (`%APPDATA%\.my_tasks_planner` –∏–ª–∏ `~/.my_tasks_planner`) —Å–æ–∑–¥–∞–π—Ç–µ `config.json` —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```json
{
  "SUPABASE_URL": "https://<your>.supabase.co",
  "SUPABASE_KEY": "public-anon-or-service-key",
  "USER_ID": "your-user-id-or-email"
}
```

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å**. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: –µ—Å–ª–∏ –æ–±–ª–∞—á–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–æ–≤–µ–µ (–ø–æ –ø–æ–ª—é `last_modified`), –æ–Ω–∞ –∑–∞–º–µ–Ω–∏—Ç –ª–æ–∫–∞–ª—å–Ω—É—é; –∏–Ω–∞—á–µ –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ –æ–±–ª–∞–∫–æ.

‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏–µ: —Ç–µ–∫—É—â–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∑–∞–≥–æ—Ç–æ–≤–∫–∞. –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (supabase auth), –Ω–∞–¥–µ–∂–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å–ª–∏—è–Ω–∏—è (merge/3-way), –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–ª—é—á–µ–π.

## –ó–∞–ø—É—Å–∫ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- Windows (–ü–ö/–Ω–æ—É—Ç): `python main.py` (–ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `flet` –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`).
- iPhone:
  - –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—É—Ç—å ‚Äî –≤—ã–ª–æ–∂–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ Web‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –ø—É–±–ª–∏—á–Ω–æ–º –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä–µ) –∏ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ iPhone.
  - –î–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞/–ø—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Flet Cloud / —É–ø–∞–∫–æ–≤–∫–∞ –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —Ç–æ–≥–¥–∞ sync —á–µ—Ä–µ–∑ Supabase –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ.

## –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª —Å–µ–π—á–∞—Å
- –í–Ω–µ–¥—Ä–∏–ª –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (`state.json`) –∏ –∞—Ç–æ–º–∞—Ä–Ω—É—é –∑–∞–ø–∏—Å—å.
- –î–æ–±–∞–≤–∏–ª `id` –∏ `last_modified` –≤—Å–µ–º —Ü–µ–ª—è–º –∏ –ø–æ–¥—Ü–µ–ª—è–º –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
- –î–æ–±–∞–≤–∏–ª –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∑–∞–≥–æ—Ç–æ–≤–∫—É `SyncClient` –¥–ª—è Supabase –∏ –∫–Ω–æ–ø–∫—É `–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å` –≤ UI.

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ ‚Äî –º–æ–≥—É:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (email/password —á–µ—Ä–µ–∑ Supabase).
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (3-way merge, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö).
- –ü–æ–º–æ—á—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É –≤–∞—à–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.

–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase –≤–º–µ—Å—Ç–µ, –∏–ª–∏ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ñ–æ–Ω‚Äë—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é? üîß